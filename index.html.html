<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìˆ˜ì—´ì˜ ê·œì¹™ ì°¾ê¸° ê²Œì„</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 30px;
      background-color: #f7f9fc;
    }
    h1 {
      color: #333;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    input {
      font-size: 16px;
      padding: 5px;
      width: 100px;
      text-align: center;
    }
    #question {
      font-size: 24px;
      margin: 20px 0;
    }
    #feedback {
      font-weight: bold;
      margin-top: 10px;
    }
    #score {
      font-size: 18px;
      margin-top: 20px;
    }
    #next-level-section {
      display: none;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1>ìˆ˜ì—´ì˜ ê·œì¹™ ì°¾ê¸° ê²Œì„</h1>

<div id="student-info-section">
  <h2>í•™ìƒ ì •ë³´ ì…ë ¥</h2>
  <input type="text" id="studentIdInput" placeholder="í•™ë²ˆ ì…ë ¥" />
  <input type="text" id="studentNameInput" placeholder="ì´ë¦„ ì…ë ¥" />
  <br><br>
  <button onclick="submitStudentInfo()">ê²Œì„ ì‹œì‘</button>
</div>


  <div id="difficulty-section">
    <p>ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”:</p>
    <button onclick="startGame('easy')">ì´ˆê¸‰</button>
    <button onclick="startGame('medium')">ì¤‘ê¸‰</button>
    <button onclick="startGame('hard')">ê³ ê¸‰</button>
  </div>

  <div id="game-section" style="display:none;">
    <p id="question">ë¬¸ì œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</p>
    <input type="text" id="answerInput" placeholder="ì •ë‹µ ì…ë ¥" />
    <button onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
    <p id="feedback"></p>
    <button onclick="nextQuestion()">ë‹¤ìŒ ë¬¸ì œ</button>
    <p id="score">í˜„ì¬ ì ìˆ˜: 0ì </p>
  </div>

  <div id="next-level-section">
    <p>ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
    <button onclick="goToNextLevel()">ë„¤, ë‹¤ìŒ ë‹¨ê³„ë¡œ!</button>
    <button onclick="restartGame()">ì•„ë‹ˆìš”, ì²˜ìŒë¶€í„° ë‹¤ì‹œ!</button>
  </div>

  <script>

let studentInfo = {};

function submitStudentInfo() {
  const studentId = document.getElementById('studentIdInput').value.trim();
  const studentName = document.getElementById('studentNameInput').value.trim();

  if (!studentId || !studentName) {
    alert("í•™ë²ˆê³¼ ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    return;
  }

  studentInfo = {
    id: studentId,
    name: studentName
  };

  document.getElementById('student-info-section').style.display = 'none';
  document.getElementById('difficulty-section').style.display = 'block';
}

    const problems = {
  easy: [
    ["2, 4, 6, __, 10", "8"],
    ["5, 10, 15, __, 25", "20"],
    ["1, 2, 4, 8, __", "16"],
    ["10, 9, 8, __, 6", "7"],
    ["7, 14, 21, __, 35", "28"],
    ["100, 90, 80, __, 60", "70"],
    ["1, 3, 5, __, 9", "7"],
    ["9, 18, 27, __, 45", "36"],
    ["1, 4, 7, __, 13", "10"],
    ["11, 22, 33, __, 55", "44"],
    ["3, 6, 9, __, 15", "12"],
    ["10, 20, 30, __, 50", "40"],
    ["5, 15, 25, __, 45", "35"],
    ["2, 5, 8, __, 14", "11"],
    ["6, 12, 18, __, 30", "24"]
  ],
  medium: [
    ["1, 1, 2, 3, __", "5"],
    ["2, 3, 5, 8, __, 21", "13"],
    ["1, 4, 9, 16, __", "25"],
    ["36, 49, 64, __", "81"],
    ["3, 6, 12, 24, __", "48"],
    ["10, 20, 40, __", "80"],
    ["2, 4, 8, 16, __", "32"],
    ["0, 1, 1, 2, 3, __", "5"],
    ["100, 81, 64, __, 36", "49"],
    ["3, 9, 27, __", "81"],
    ["5, 10, 20, __, 80", "40"],
    ["8, 16, 32, __, 128", "64"],
    ["7, 14, 28, __, 112", "56"],
    ["11, 22, 44, __, 176", "88"],
    ["1, 3, 6, __, 15", "10"]
  ],
  hard: [
    ["81, 27, 9, __", "3"],
    ["1, -2, 3, -4, __, -6", "5"],
    ["0, 1, 4, 9, __", "16"],
    ["1, 1/2, 1/4, __", "1/8"],
    ["2, 3, 5, 9, 17, __", "33"],
    ["13, 11, 9, __, 5", "7"],
    ["1, 2, 6, 24, __", "120"],
    ["1, 3, 6, 10, 15, __", "21"],
    ["2, 3, 5, 7, 11, __", "13"],
    ["1, 2, 3, 5, 8, __", "13"],
    ["10, 5, 2.5, __, 0.625", "1.25"],
    ["4, 7, 13, __, 34", "21"],
    ["1, 2, 3, 6, __, 20", "11"],
    ["0, 3, 8, 15, __", "24"],
    ["3, 8, 15, 24, __", "35"]
  ]
};

    let currentProblem = null;
    let currentDifficulty = null;
    let score = 0;
let totalScore = { easy: 0, medium: 0, hard: 0 };
    let remainingProblems = [];
    const difficulties = ['easy', 'medium', 'hard'];

    function startGame(difficulty) {
      currentDifficulty = difficulty;
      score = 0;
      remainingProblems = [...problems[difficulty]];
      document.getElementById('difficulty-section').style.display = 'none';
      document.getElementById('game-section').style.display = 'block';
      document.getElementById('next-level-section').style.display = 'none';
      nextQuestion();
    }

    function nextQuestion() {
      if (remainingProblems.length === 0) {
  totalScore[currentDifficulty] = score;
        document.getElementById('game-section').style.display = 'none';
        document.getElementById('next-level-section').style.display = 'block';
        return;
      }

      const randomIndex = Math.floor(Math.random() * remainingProblems.length);
      currentProblem = remainingProblems.splice(randomIndex, 1)[0];
      document.getElementById('question').textContent = `ë¬¸ì œ: ${currentProblem[0]}`;
      document.getElementById('feedback').textContent = "";
      document.getElementById('answerInput').value = "";
      document.getElementById('score').textContent = `í˜„ì¬ ì ìˆ˜: ${score}ì `;
    }

    function checkAnswer() {
      const userAnswer = document.getElementById('answerInput').value.trim();
      const correctAnswer = currentProblem[1];
      const feedback = document.getElementById('feedback');

      if (userAnswer === correctAnswer) {
        score++;
        feedback.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
        feedback.style.color = "green";
        document.getElementById('score').textContent = `í˜„ì¬ ì ìˆ˜: ${score}ì `;
        nextQuestion();
      } else {
        feedback.textContent = "ë‹¤ì‹œ ìƒê°í•´ ë³´ì„¸ìš”.";
        feedback.style.color = "orange";
      }
    }function goToNextLevel() {
      const currentIndex = difficulties.indexOf(currentDifficulty);
      if (currentIndex < difficulties.length - 1) {
        startGame(difficulties[currentIndex + 1]);
      } else {
        alert(`ëª¨ë“  ë‚œì´ë„ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!
ì´ˆê¸‰ ì ìˆ˜: ${totalScore.easy}ì 
ì¤‘ê¸‰ ì ìˆ˜: ${totalScore.medium}ì 
ê³ ê¸‰ ì ìˆ˜: ${totalScore.hard}ì 
ì´ì : ${totalScore.easy + totalScore.medium + totalScore.hard}ì `);

const result = {
  ...studentInfo,
  score: totalScore,
  totalScore: totalScore.easy + totalScore.medium + totalScore.hard
};

function sendScoreToSheet(result) {
  fetch("https://script.google.com/macros/s/AKfycbwktNr7hp2tm4cLayvIksAv4oQpCfo1lXhyG9zddD3N-TEBqx6VIvYNjppbG-FgAn9-/exec", {
    method: "POST",
    mode: "no-cors",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(result)
  })
  .then(() => console.log("ì „ì†¡ ì„±ê³µ"))
  .catch(err => console.error("ì „ì†¡ ì‹¤íŒ¨", err));
}

        restartGame();
      }
    }

    function restartGame() {
      document.getElementById('game-section').style.display = 'none';
      document.getElementById('next-level-section').style.display = 'none';
      document.getElementById('difficulty-section').style.display = 'block';
    }
  </script>
</body>
</html>
